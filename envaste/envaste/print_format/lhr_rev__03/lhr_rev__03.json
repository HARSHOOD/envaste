{
 "absolute_value": 0,
 "align_labels_right": 0,
 "creation": "2024-04-25 16:58:20.248215",
 "custom_format": 1,
 "default_print_language": "en",
 "disabled": 1,
 "doc_type": "Work Order",
 "docstatus": 0,
 "doctype": "Print Format",
 "font_size": 14,
 "html": "<!DOCTYPE html>\r\n<html lang=\"en\">\r\n\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n    <title>Document</title>\r\n</head>\r\n<style>\r\n    .container {\r\n        width: 100%;\r\n    }\r\n\r\n    .print-format td,\r\n    .print-format th {\r\n        padding: 6px !important;\r\n        font-size: 15px;\r\n    }\r\n\r\n    .footer {\r\n        position: fixed;\r\n        bottom: 0;\r\n        width: 100%;\r\n        text-align: center;\r\n    }\r\n\r\n    td,\r\n    th {\r\n        border: 1px solid #000;\r\n        text-align: left;\r\n        padding: 8px;\r\n        color: black !important;\r\n    }\r\n\r\n    table {\r\n        border-collapse: collapse;\r\n        width: 100%;\r\n        color: black !important;\r\n    }\r\n\r\n    .line {\r\n        border-bottom: 3px solid black;\r\n        height: 1px;\r\n        display: block;\r\n    }\r\n\r\n    .print-format label {\r\n        display: inline-block !important;\r\n        color: #000;\r\n    }\r\n\r\n    .page-break {\r\n        page-break-after: always;\r\n    }\r\n\r\n    input[type=checkbox] {\r\n        border: 1px solid #000;\r\n        margin-left: 3px;\r\n    }\r\n</style>\r\n\r\n<body>\r\n    <div class=\"container\" style=\"padding-left:0px !important;padding-right:0px !important;\">\r\n        {% set pitem = frappe.db.get_value('Item', {'item_code': doc.production_item}, ['custom_description_1',\r\n        'custom_description_2','custom_description_3'])%}\r\n        {% if pitem %}\r\n        {% set custom_description_1 = pitem[0] %}\r\n        {% set custom_description_2 = pitem[1] %}\r\n        {% set custom_description_3 = pitem[2] %}\r\n        <p style=\"\">LHR-{{ custom_description_1 or \"\" }} {{ custom_description_2 or \"\" }} {{ custom_description_3 or \"\"\r\n            }} Rev 03</p>\r\n        {% endif %}\r\n        <table>\r\n            <tr>\r\n                {% if pitem %}\r\n                <th style=\"width: 370px;text-align: center;\"><b>Lot History Record {{custom_description_1 or \"\"}}\r\n                        {{custom_description_2 or \"\"}} {{custom_description_3 or \"\"}}</b></th>\r\n                {% endif %}\r\n            </tr>\r\n        </table>\r\n    </div>\r\n    <br>\r\n    <br>\r\n    <div class=\"table-div2\">\r\n        <table>\r\n            {% set p =frappe.get_doc(\"Production Plan\" ,doc.production_plan) %}\r\n            {% set so =frappe.get_doc(\"Sales Order\",doc.sales_order)%}\r\n            <tr>\r\n                <th><b>Date :</b> {{so.transaction_date }}</th>\r\n                <th><b>Work Order :</b> {{doc.name }}</th>\r\n                <td colspan=\" 3\"><b>Description:</b>{{ custom_description_1 or \"\" }} {{ custom_description_2 or \"\" }} {{\r\n                    custom_description_3 or \"\" }}\r\n                </td>\r\n            </tr>\r\n            <tr>\r\n                <th><b>Customer :</b>{{so.customer or \"\"}}</th>\r\n                <th><b>Product Code:</b> {{doc.production_item or \"\"}}</th>\r\n                <th><b>Product Print:</b>{{doc.custom_product_rev or \"\"}}</th>\r\n            </tr>\r\n            <tr>\r\n                <th>{% set so_doc =frappe.get_doc(\"Sales Order\",doc.sales_order)%}{%for sitems in so_doc.items%}{% if\r\n                    sitems.item_code ==doc.production_item%}<b>Quantity Ordered:</b>{{sitems.custom_so_qty_}}{%\r\n                    endif%}{%endfor%}</th>\r\n                <th>{%for sitems in so_doc.items%}{% if sitems.item_code ==doc.production_item%}<b>Quantity to\r\n                        Produce:</b>{{sitems.qty}}</th>{%endif%}{% endfor%}\r\n          \r\n              <th><b>Lot :</b> \r\n  {% set lot_doc = frappe.get_doc('Batch', {'reference_name': doc.name}) %}\r\n  {% if lot_doc and lot_doc.batch_id %}\r\n    {{ lot_doc.batch_id }}\r\n  {% else %}\r\n    No batch ID found for reference name {{ doc.name }}\r\n  {% endif %}\r\n</th>\r\n            </tr>\r\n        </table>\r\n        <br>\r\n        <br>\r\n        <b>BOM list</b><br><br>\r\n        <table>\r\n            <tr>\r\n                <th>#</th>\r\n                <th style=\"width:10%\"><b>Product code</b></th>\r\n                <th style=\"width:10%\"><b>Rev</b></th>\r\n                <th style=\"width:40%\"><b>Description</b></th>\r\n                <th style=\"width:10%\"><b>Qty/unit</b></th>\r\n                <th style=\"width:10%\"><b>Planned Qty</b></th>\r\n                <th style=\"width:20%\"><b>Lot</b></th>\r\n            </tr>\r\n            <tr>\r\n                {% set seit = frappe.db.get_value(\"Stock Entry\", filters={\"work_order\": doc.name, \"stock_entry_type\":\r\n                \"Material Transfer for Manufacture\"}) %}\r\n                {% set wo1 = frappe.db.get_value(\"Work Order\", filters={\"production_plan\": doc.production_plan,\r\n                \"name\":[\"!=\",doc.name]}) %}\r\n                {% set setis = frappe.db.get_value(\"Stock Entry\", filters={\"work_order\": wo1, \"stock_entry_type\":\r\n                \"Material Transfer for Manufacture\"}) %}\r\n                {% if seit %}\r\n                {% set stock_entry = frappe.get_doc(\"Stock Entry\", seit) %}\r\n                {% endif %}\r\n                {%set bom1=\"\"%}\r\n                {% if setis %}\r\n                {% set stock_entry1 = frappe.get_doc(\"Stock Entry\", setis) %}\r\n                {% if stock_entry1.bom_no%}\r\n                {%set bom1=frappe.get_doc(\"BOM\",stock_entry1.bom_no)%}\r\n                {%endif%}\r\n                {% endif %}\r\n                {% set bomi =frappe.get_doc(\"BOM\",doc.bom_no)%}\r\n             \r\n                \r\n                {% for items in bomi.items %}\r\n            \r\n                <td>{{items.idx}}</td>\r\n                <td>{{items.item_code}}</td>\r\n                <td>{{items.custom_product_rev or \"\"}}</td>\r\n                <td>{% set ditem = frappe.db.get_value('Item', {'item_code':items.item_code}, ['custom_description_1',\r\n                    'custom_description_2','custom_description_3'])%}\r\n                    {% if ditem %}\r\n                    {% set custom_description_1 = ditem[0] %}\r\n                    {% set custom_description_2 = ditem[1] %}\r\n                    {% set custom_description_3 = ditem[2] %}\r\n                    {{ custom_description_1 or \"\" }} {{ custom_description_2 or \"\" }} {{ custom_description_3 or \"\" }}\r\n                    {%endif%}</td>\r\n                <td>{{items.qty or \"\"}}</td>\r\n                 <td>{% for itemq in doc.required_items%} {% if itemq.item_code ==items.item_code%}{{itemq.required_qty or \"\"}} {{items.uom or \"\"}} {%endif %}{%endfor%}</td>\r\n                <td> {% if stock_entry %}\r\n                    {% for entry_item in stock_entry.items %}\r\n                    {% if entry_item.item_code == items.item_code %}\r\n                    {{ entry_item.batch_no or \"\" }}\r\n                    {% endif %}\r\n                    {% endfor %}\r\n                    {% endif %}</td>\r\n            </tr>\r\n            {% endfor %}\r\n        </table>\r\n        <br><br>\r\n        <div class=\"page-break\"></div>\r\n        <table>\r\n    </div>\r\n    <br>\r\n    {% set bom =frappe.get_doc(\"BOM\",doc.bom_no)%}\r\n    {% set w=frappe.get_list(\"Job Card\", filters={\"work_order\": doc.name},order_by='creation asc') %}\r\n    <br>\r\n    <div class=\"table-div3\">\r\n        <div class=\"table-div\" style=\"display: flex;\">\r\n            <table>\r\n                <p style=\"margin-right: 0px;\">LHR-{{custom_description_1 or \"\"}} {{custom_description_2 or \"\"}}\r\n                    {{custom_description_3 or \"\"}} Rev 03</p>\r\n                <tr>\r\n                    {% if pitem %}\r\n                    <th style=\"width: 370px;text-align: center;\"><b>Lot History Record {{custom_description_1 or \"\"}}\r\n                            {{custom_description_2 or \"\"}} {{custom_description_3 or \"\"}}</b></th>\r\n                    {% endif %}\r\n                </tr>\r\n            </table>\r\n        </div>\r\n        <br>\r\n        <table>\r\n            <tr>\r\n                <th colspan=\"5\"><b>Work step Rationalization (Operator to fill revision No.)</b></th>\r\n                <th colspan=\"4\"><b>Completed Item Rationalization</b></th>\r\n            </tr>\r\n            <tr style=\"width:100%\">\r\n                <th style=\"width:11%\"><b>Op #</b></th>\r\n                <th style=\"width:11%\"><b>Work step</b></th>\r\n                <th style=\"width:11%\"><b>Start time</b></th>\r\n                <th style=\"width:11%\"><b>End time</b></th>\r\n                <th style=\"width:11%\"><b>Qty</b></th>\r\n                <th style=\"width:11%\"><b>Good</b></th>\r\n                <th style=\"width:11%\"><b>Scrap</b></th>\r\n                <th style=\"width:11%\"><b>Initial & Sign</b></th>\r\n                <th style=\"width:11%\"><b>Date</b></th>\r\n            </tr>\r\n                {% set lens = namespace({'len':7})%}\r\n                {% for data in w%}\r\n                    {% set job_card = frappe.get_doc(\"Job Card\", data.name) %}\r\n                {% if job_card.time_logs is defined and job_card.time_logs|length > 0 %}\r\n                    <tr>\r\n                        {% set lens.len = job_card.time_logs|length +1 %}\r\n                        <td rowspan=\"{{ lens.len }}\">{{ loop.index }}</td>\r\n                        <td rowspan=\"{{ lens.len }}\">{{ job_card.operation }}\r\n                            <br>\r\n                            <p>{% set routing=frappe.get_doc(\"Routing\",bom.routing)%}{% for routings in routing.operations%} {% if routings.operation==job_card.operation%} ({{ routings.custom_wi or \"\" }}) {%endif%} {%endfor%}</p>\r\n                        </td>\r\n                        {% for time in job_card.time_logs %}\r\n                            <td>{{ time.from_time }}</td>\r\n                            <td>{{ time.to_time }}</td>\r\n                            <td>{{ time.completed_qty }}</td>\r\n                            <td>{{time.custom_good or \"\"}}</td>\r\n                            <td>{{time.custom_scrap or \"\"}}</td>\r\n                            <td>{{ time.employee }}</td>\r\n                            <td>{{ job_card.posting_date }}</td>\r\n                    </tr> \r\n                    {% endfor %} \r\n                {% else %} \r\n                    <tr>\r\n                        <td rowspan=\"7\">{{ loop.index }}</td>\r\n                        <td rowspan=\"7\">{{ job_card.operation }}\r\n                            <br>\r\n                            <p>({{ job_card.workstation or \"\" }})</p>\r\n                        </td>\r\n                    {% for _ in range(5) %}\r\n                            <td></td>\r\n                            <td></td>\r\n                            <td></td>\r\n                            <td></td>\r\n                            <td></td>\r\n                            <td></td>\r\n                            <td></td>\r\n                    </tr>\r\n                    <tr>\r\n                {% endfor%}\r\n                </tr>\r\n            {% endif %}\r\n            <tr>\r\n                <td colspan=\"2\"> <b>Equipment</b> <br> {% set works=frappe.get_doc(\"Workstation\",job_card.workstation)%} \r\n                {% for eq in works.custom_equipment%}\r\n                    {{eq.equipment}} \r\n                {%endfor%}\r\n                    </label><input type=\"checkbox\" id=\"tick1\" name=\"tick1\" value=\"0311001\"><br></td>\r\n                <td colspan=\"3\">\r\n                    <b>Tooling</b><br>\r\n                    {% for u in works.custom_tooling%}\r\n                    <label>{{ u.tooling_name_or_code }}</label>\r\n                    <input type=\"checkbox\" id=\"{{ loop.index }}\" name=\"tooling_checkbox\"\r\n                        value=\"{{ u.tooling_name_or_code }}\"><br>\r\n                    {% endfor %}\r\n                </td>\r\n                <td colspan=\"2\"> <b>Production Supply</b><br><label>\r\n                    {% for ut in works.custom_production_supply%}\r\n                        {{ut.production or \"\"}}\r\n                        </label><input type=\"checkbox\" id=\"tick1\" name=\"tick1\" value=\"0311001\"><br>\r\n                    {% endfor %}\r\n                </td>\r\n            </tr>\r\n            <tr>\r\n            {%endfor%}\r\n            \r\n        </table>\r\n        <br>\r\n        <table>\r\n            <tr>\r\n                <th colspan=\"10\" style=\"padding-bottom:100px !important;\"><b>Remarks:</b></th>\r\n            </tr>\r\n        </table>\r\n    </div>\r\n    </div>\r\n    </div>\r\n    </div>\r\n</body>\r\n\r\n</html>",
 "idx": 0,
 "line_breaks": 0,
 "margin_bottom": 15.0,
 "margin_left": 15.0,
 "margin_right": 15.0,
 "margin_top": 15.0,
 "modified": "2024-11-05 11:33:39.186433",
 "modified_by": "Administrator",
 "module": "Envaste",
 "name": "LHR Rev -03",
 "owner": "Administrator",
 "page_number": "Hide",
 "print_format_builder": 0,
 "print_format_builder_beta": 0,
 "print_format_type": "Jinja",
 "raw_printing": 0,
 "show_section_headings": 0,
 "standard": "Yes"
}